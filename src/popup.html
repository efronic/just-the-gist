<!doctype html>
<html lang="en" data-theme="gistlight">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Just the Gist</title>
    <link rel="stylesheet" href="tailwind.css" />
  </head>
  <body
    class="w-[480px] h-[620px] overflow-y-auto font-sans antialiased bg-surface text-slate-800 dark:text-base-content"
  >
    <header class="bg-primary px-3 py-4 flex items-center justify-between shadow-sm">
      <h1 class="text-lg font-semibold tracking-tight text-white">Just the Gist</h1>
      <div class="flex items-center gap-2">
        <button
          id="themeToggle"
          type="button"
          class="btn btn-ghost text-white"
          title="Toggle theme"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 48 48"
            class="w-4 h-4"
            fill="currentColor"
            aria-hidden="true"
          >
            <path d="M14 24a10 10 0 0 0 10 10V14a10 10 0 0 0-10 10Z" />
            <path
              d="M24 2a22 22 0 1 0 22 22A21.9 21.9 0 0 0 24 2Zm18 22A18.1 18.1 0 0 1 24 42v-8a10 10 0 0 1 0-20V6A18.1 18.1 0 0 1 42 24Z"
            />
          </svg>
        </button>
        <button id="openOptions" type="button" class="btn btn-ghost text-white" title="Options">
          <svg
            viewBox="0 0 24 24"
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="3" />
            <path
              d="M3.66122 10.6392C4.13377 10.9361 4.43782 11.4419 4.43782 11.9999C4.43781 12.558 4.13376 13.0638 3.66122 13.3607C3.33966 13.5627 3.13248 13.7242 2.98508 13.9163C2.66217 14.3372 2.51966 14.869 2.5889 15.3949C2.64082 15.7893 2.87379 16.1928 3.33973 16.9999C3.80568 17.8069 4.03865 18.2104 4.35426 18.4526C4.77508 18.7755 5.30694 18.918 5.83284 18.8488C6.07287 18.8172 6.31628 18.7185 6.65196 18.5411C7.14544 18.2803 7.73558 18.2699 8.21895 18.549C8.70227 18.8281 8.98827 19.3443 9.00912 19.902C9.02332 20.2815 9.05958 20.5417 9.15224 20.7654C9.35523 21.2554 9.74458 21.6448 10.2346 21.8478C10.6022 22 11.0681 22 12 22C12.9319 22 13.3978 22 13.7654 21.8478C14.2554 21.6448 14.6448 21.2554 14.8478 20.7654C14.9404 20.5417 14.9767 20.2815 14.9909 19.9021C15.0117 19.3443 15.2977 18.8281 15.7811 18.549C16.2644 18.27 16.8545 18.2804 17.3479 18.5412C17.6837 18.7186 17.9271 18.8173 18.1671 18.8489C18.693 18.9182 19.2249 18.7756 19.6457 18.4527C19.9613 18.2106 20.1943 17.807 20.6603 17C20.8677 16.6407 21.029 16.3614 21.1486 16.1272M20.3387 13.3608C19.8662 13.0639 19.5622 12.5581 19.5621 12.0001C19.5621 11.442 19.8662 10.9361 20.3387 10.6392C20.6603 10.4372 20.8674 10.2757 21.0148 10.0836C21.3377 9.66278 21.4802 9.13092 21.411 8.60502C21.3591 8.2106 21.1261 7.80708 20.6601 7.00005C20.1942 6.19301 19.9612 5.7895 19.6456 5.54732C19.2248 5.22441 18.6929 5.0819 18.167 5.15113C17.927 5.18274 17.6836 5.2814 17.3479 5.45883C16.8544 5.71964 16.2643 5.73004 15.781 5.45096C15.2977 5.1719 15.0117 4.6557 14.9909 4.09803C14.9767 3.71852 14.9404 3.45835 14.8478 3.23463C14.6448 2.74458 14.2554 2.35523 13.7654 2.15224C13.3978 2 12.9319 2 12 2C11.0681 2 10.6022 2 10.2346 2.15224C9.74458 2.35523 9.35523 2.74458 9.15224 3.23463C9.05958 3.45833 9.02332 3.71848 9.00912 4.09794C8.98826 4.65566 8.70225 5.17191 8.21891 5.45096C7.73557 5.73002 7.14548 5.71959 6.65205 5.4588C6.31633 5.28136 6.0729 5.18269 5.83285 5.15108C5.30695 5.08185 4.77509 5.22436 4.35427 5.54727C4.03866 5.78945 3.80569 6.19297 3.33974 7C3.13231 7.35929 2.97105 7.63859 2.85138 7.87273"
            />
          </svg>
        </button>
      </div>
    </header>
    <!-- Tab Buttons Replacement -->
    <div class="mt-3 px-3">
      <div class="flex gap-2 items-start">
        <button id="btnSummary" class="panel-toggle" aria-pressed="true">Summary</button>
        <button id="btnTranscript" class="panel-toggle" aria-pressed="false">Transcript</button>
      </div>
    </div>
  <div class="mt-2 px-3" id="panelsWrapper">
      <!-- Summary Panel -->
      <div id="summaryTabPanel" class="p-4 bg-white rounded-md border border-slate-200">
        <div id="summaryTab" class="">
          <div id="apiSection" class="space-y-2" style="display: none">
            <label for="apiKey" class="block text-[11px] font-semibold mt-1 text-slate-700"
              >Google Gemini API key</label
            >
            <input
              id="apiKey"
              type="password"
              placeholder="AIza..."
              class="w-full rounded-md border border-slate-300 bg-white px-2.5 py-2 text-[11px] focus:border-primary focus:ring-primary"
            />
            <div class="flex items-center gap-2 mt-1">
              <button id="saveApi" class="gbtn !px-3 !py-1.5 !text-[11px]">
                Save API settings
              </button>
              <span id="apiStatus" class="text-[10px] text-slate-600"></span>
            </div>
            <div class="text-[10px] text-slate-600 break-all">
              You can also manage this in
              <a href="#" id="openOptions2" class="text-primary hover:underline">Options</a>.
            </div>
          </div>
          <!-- URL Input with inline copy (flex group) -->
          <div>
            
            <div
              class="flex items-stretch rounded-md border border-slate-300 bg-white focus-within:ring-1 focus-within:ring-primary focus-within:border-primary mb-4"
            >
              <input
                id="url"
                type="text"
                value=""
                readonly
                class="flex-1 bg-transparent border-0 px-3 py-2 text-[11px] text-slate-700 focus:outline-none focus:ring-0 font-sans"
              />
              <button
                id="copyUrl"
                type="button"
                aria-label="Copy URL"
                class="px-2 border-l border-slate-300 text-slate-500 hover:text-slate-800 focus:outline-none flex items-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  class="w-4 h-4"
                >
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                </svg>
              </button>
            </div>
          </div>
          <!-- Controls (Mode / Detail / Summarize) inline -->
          <div class="flex flex-col gap-2">
            <div class="flex items-start gap-2 mb-4">
              <!-- Mode select (default Auto) -->
              <div class="w-1/4 min-w-[105px]">
                <label for="mode" class="sr-only">Mode</label>
                <select id="mode" class="select select-bordered select-sm w-full">
                  <option value="auto" selected>Auto</option>
                  <option value="page">Page</option>
                  <option value="video">Video</option>
                </select>
              </div>
              <!-- Detail select (default Standard) -->
              <div class="w-1/4 min-w-[115px]">
                <label for="detailLevelSelect" class="sr-only">Detail level</label>
                <select id="detailLevelSelect" class="select select-bordered select-sm w-full">
                  <option value="concise">Concise</option>
                  <option value="standard" selected>Standard</option>
                  <option value="detailed">Detailed</option>
                  <option value="expanded">Expanded</option>
                </select>
              </div>
              <!-- Summarize Button (same height) -->
              <div class="flex-1 min-w-[140px] flex">
                <button id="summarizeBtn" class="btn btn-primary btn-sm w-full font-semibold tracking-tight shadow-sm">Summarize</button>
              </div>
            </div>
          </div>
          </div>
          <div id="status" class="text-[10px] text-slate-600 hidden"></div>
          <pre
            id="output"
            class="hidden max-h-80 overflow-auto whitespace-pre-wrap rounded-md border border-slate-200 bg-slate-50 p-3 text-[11px] leading-snug"
          ></pre>
      </div>
              <!-- Transcript Panel -->
      <div id="transcriptTabPanel" class=" hidden">
        <div>
          <section id="transcriptContainer" class="hidden">
            <div
              id="transcriptPreview"
              class="relative max-h-80 overflow-y-auto scroll-smooth rounded-md border border-slate-200 bg-white dark:bg-surface pb-3 text-[13px] leading-relaxed font-transcript gist-scrollbar"
            >
              <div
                id="transcriptToolbar"
                class="sticky -top-px left-0 right-0 z-10 flex items-center gap-2 px-2 py-1.5 bg-surface-translucent border-b border-slate-200"
              >
                <button
                  id="tbCopy"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Copy"
                  aria-label="Copy transcript"
                >
                  <span class="sr-only">Copy transcript</span>
                  <svg
                    viewBox="0 0 24 24"
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                  >
                    <path
                      d="M6 11c0-2.828 0-4.243.879-5.121C7.757 5 9.172 5 12 5h3c2.828 0 4.243 0 5.121.879C21 6.757 21 8.172 21 11v5c0 2.828 0 4.243-.879 5.121C19.243 22 17.828 22 15 22h-3c-2.828 0-4.243 0-5.121-.879C6 20.243 6 18.828 6 16v-5Z"
                    />
                    <path
                      d="M6 19c-1.657 0-3-1.343-3-3v-6c0-3.771 0-5.657 1.172-6.828C5.343 2 7.229 2 11 2h4c1.657 0 3 1.343 3 3"
                    />
                  </svg>
                </button>
                <button
                  id="tbCopyTs"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Copy +TS"
                  aria-label="Copy with timestamps"
                >
                  <span class="sr-only">Copy with timestamps</span>
                  <svg
                    viewBox="0 0 24 24"
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M22 11.1V6.9C22 3.4 20.6 2 17.1 2h-4.2C9.4 2 8 3.4 8 6.9V8h3.1c3.5 0 4.9 1.4 4.9 4.9V16h1.1c3.5 0 4.9-1.4 4.9-4.9Z"
                    />
                    <path
                      d="M16 17.1v-4.2c0-3.5-1.4-4.9-4.9-4.9H6.9C3.4 8 2 9.4 2 12.9v4.2C2 20.6 3.4 22 6.9 22h4.2c3.5 0 4.9-1.4 4.9-4.9Z"
                    />
                    <path d="M6.08 15 8.03 16.95 11.92 13.05" />
                  </svg>
                </button>
                <button
                  id="tbDownload"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Download"
                  aria-label="Download transcript"
                >
                  <span class="sr-only">Download transcript</span>
                  <svg
                    viewBox="0 0 24 24"
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path
                      d="M17 9c2.175.012 3.353.109 4.121.878C22 10.757 22 12.172 22 15v1c0 2.829 0 4.243-.879 5.122C20.243 22 18.828 22 16 22H8c-2.828 0-4.243 0-5.122-.878C2 20.243 2 18.829 2 16v-1c0-2.828 0-4.243.879-5.122C3.647 9.11 4.825 9.012 7 9"
                    />
                    <path d="M12 2v13m0 0L9 11.5M12 15l3-3.5" />
                  </svg>
                </button>
                <button
                  id="tbExpand"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Expand"
                  aria-label="Expand transcript"
                  aria-pressed="false"
                >
                  <span class="sr-only">Expand transcript</span>
                  <svg
                    viewBox="0 0 24 24"
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M15 9 21 3h-6v6Zm-6 0V3H3l6 6Zm0 6-6 6h6v-6Zm6 0v6h6l-6-6Z" />
                  </svg>
                </button>
                <button
                  id="tbToggleTs"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Timestamps"
                  aria-pressed="true"
                  aria-label="Toggle timestamps"
                >
                  <span class="sr-only">Toggle timestamps</span>
                  <svg viewBox="0 0 24 24" class="w-4 h-4" fill="currentColor">
                    <path d="M3.5 7.5A1.5 1.5 0 1 0 3.5 4.5a1.5 1.5 0 0 0 0 3Z" />
                    <path d="M8 5a1 1 0 0 0 0 2h13a1 1 0 1 0 0-2H8Z" />
                    <path d="M8 11a1 1 0 0 0 0 2h13a1 1 0 1 0 0-2H8Z" />
                    <path d="M7 18a1 1 0 0 1 1-1h13a1 1 0 1 1 0 2H8a1 1 0 0 1-1-1Z" />
                    <path d="M5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" />
                    <path d="M3.5 19.5A1.5 1.5 0 1 0 3.5 16.5a1.5 1.5 0 0 0 0 3Z" />
                  </svg>
                </button>
                <button
                  id="tbCompact"
                  class="tbtn tooltip tooltip-bottom"
                  data-tip="Compact"
                  aria-pressed="false"
                  aria-label="Compact mode"
                >
                  <span class="sr-only">Compact mode</span>
                  <svg
                    viewBox="0 0 64 64"
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linejoin="bevel"
                    stroke-miterlimit="10"
                  >
                    <polyline points="25,19 32,26 39,19" />
                    <line x1="32" y1="26" x2="32" y2="0" />
                    <polyline points="39,45 32,38 25,45" />
                    <line x1="32" y1="38" x2="32" y2="64" />
                  </svg>
                </button>
                <div
                  id="transcriptMetaMini"
                  class="hidden md:block text-[10px] text-slate-500 whitespace-nowrap"
                ></div>
                <div class="relative ml-auto min-w-[140px] w-full h-full max-w-[50%]">
                  <label for="transcriptSearch" class="sr-only">Search transcript</label>
                  <input
                    id="transcriptSearch"
                    type="search"
                    placeholder="Search…"
                    class="input input-bordered w-full"
                  />
                </div>
              </div>
              <div id="transcriptContent" class="space-y-0 px-3 pb-3 pt-2"></div>
            </div>
            <div id="transcriptMeta" class="text-[11px] text-slate-500"></div>
          </section>
          <div id="noTranscriptMsg" class="text-[11px] text-slate-500 hidden">
            No transcript available for this page/video.
          </div>
        </div>
      </div>
      </div>

    </div>
    <main class="px-4 pb-6 space-y-6"></main>
    <script type="module" src="popup.js"></script>
  </body>
</html>
